## ☠ HTML ☠

### Статические прототипы

Мы в компании используем для разработки статические прототипы. Статические прототипы — это просто HTML-файлы, которые можно запустить на любой машине, на которой есть браузер. Не нужен ни сревер, ни сборка, ни деплой.

Плюсы такого подхода:
* Результат виден раньше. Цикл до первого отсмотра значительно сокращается: дизайнеры, аналитики, ПМы могут увидеть как будет выглядеть продукт сразу как только страницу сверстали и добавили немного JS. 
* Мы вообще отвязываемся от бэкенд технологии. Внутри команды мы можем использовать единообразный процесс вне зависимости от того, что это за проект. Да, конечно, кому-то придётся переводить статику в UiBinder, Freemarker или что-то ещё.
* Серверные pазработчики просто могут просто вставолять куски статической вёрстки в проект — в нём не будет дыр, и он будет выглядеть красиво.
 
### Адский код

Но есть и проблемы:
* либо мы полчаем неподдерживаемую портянку в несколько тысяч строк, с которой не каждый diff справится — что уж говорить о человеке;
* либо у нас много страничек, которые надо держать в соответствии друг с другом.

Получается, что статические прототипы не решают свою задачу^ не упрощают разработку, а наоборот усложняют её.

Но сдаваться рано! У нас есть генераторы статических сайтов.

В принципе их не так много. То, что попало в наше поле зрения мы отсмотрели, и выбрали для себя Assemble. Если вы знаете аналоги, готов с удовольствем обсудить их с вами после доклада.

### Assemble

Как я уже сказал, Assemble — это генератор статических сайтов. В качестве среды он использует Node.js, а в качестве шаблонного движка по умолчанию — Handlebars. В качестве данных можно использовать JSON или YAML, а на выходе генерить HTML, Markdown, Handlebars и т.д.

Он позволяет создавать небольшие шаблоны — паршлы — а потом из них, как из кирпичиков, собирать HTML-странички. Всё как в вашем любимом серверном шаблонизаторе, за исключением того, что вам не нужен ни Apache, ни Tomcat, ничего. После того, как страница сгенерена, её можно просто открывать в браузере.

В принципе, Assemble очень прост в освоении, и хотя, как и у многих опен-сорс проектов, документация у него страдает — разобраться несложно. Уже несколько месяцев мы генерим статические прототипы с помощью Assemble и за это время столкнулись лишь с одной крупной сложностью: очень легко потерять ссылку на глобальный контекст. К счастью, у Handlebars есть хелперы — возможность писать вспомогательные директивы на JS — и мы создали воркэраунд:
`{{setGlobalScope}}` и `{{#withGlobalScope}}{{/withGlobalScope}}`.

Конечно же на этом мы не остановились: у нас есть и другие хелперы. Найти их можно у нас на гитхабе.

Кроме того, две важных вещи, о которых часто забывают при работе с Assemble:
* у него есть встроенные переменные: `pagename`, `filename`, `ext` и т.д.
* в конфигурации есть поле `postprocess`: можно, например, подправить пути к ресурсам
