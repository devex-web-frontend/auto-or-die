## ☠ CSS ☠

Все проблемы CSS можно увидеть в этом куске кода:
_код_

* постоянные повторения
* префиксы
* отсутствие конфигурации
* и т.д.

В общем, CSS — он совсем не DRY.

Естественно, решение давно известно — это препроцессоры. Есть в зале те, кто не используют препроцессоры?

— Нет: Тогда этот слайд мы пропустим.

— Да: Препроцессоры позволяют писать меньше кода за те же деньги. Например, такой код:
_код_

превращается в такой:
_код_

Препроцессоры — это отличный инстумент борьбы с рутиной. Но большинство постов и рассказов о них обычно ограничиваются стандартным набором:
* вложенность
* переменные
* миксины
* префиксы

Конечно, это всё мощные средства, сильно упрощающие разработку. Этот код уже выглядит лучше:
_код_

Мы используем Stylus, поэтому этот пример и все последующие будут именно в нём.

Но это далеко не всё! Можно и нужно копать глубже — в любом препроцессоре есть куча «вкусных» штук.

Например, циклы. Они хорошо знакомы любому программисту, но верстальщики почему-то их побаиваются. А не стоит — это отличный способ уменьшить количество кода.

Например, прошлый пример можно ещё немного упростить.
_код_

Или другой пример. мы писали свою колоночную систему. Без циклов так она выглядит для 2—3 колоночной вёрстки:
_код_

А если нужно 4:
_код_

Ну и 5, пожалуй пригодится:
_код_

Ну а если 6? Нет, больше не будет кода. Думаю, всё уже понятно.
Ну а с использованием циклов можно получить расширяемый код всего в несколько строчек.
_код_

Другой важный момент — параметризация. У нас есть возможность использовать условные конструкции. Это очень просто и очевидно, но об этом часто забывают. Например, хорошо бы тач-устройствам не отдавать hover-состояние, потому что из-за этого интерфейс становится менее отзывчивым.
_код_

Кроме того, в Stylus есть условное присваивание: значение будет присвоено только, если переменной ещё не было присвоено значение. Это очень удобный механизм для добавления значений по умолчанию. Например, если к примеру с колонками добавить всего несколько строк, мы получим не только расширяемый, но ещё и гибкий код:
_код_

Другой важный момент — функции. Обычно в препроцессоре есть ряд встроенных функций, которые позволяют побеждать рутину.
Например, в Stylus переопределяется стандартная функция `rgba`, так что вместо:
_код_

можно писать более привычным образом:
_код_.

Или, например, функции работы с цветами `lighten`/`darken`, `saturate`/`desaturate` и т.д., которые позволяют забыть о ползунках и пипетках в случае, когда вам надо поменять какие-то параметры.
_скриншот_ + _код_

Или функция `image-size`, которая позволяет не писать размеры изображения руками, их за вас посчитает машина.

Но самое главное — вы легко можете написать функцию, которая будет что-то делать за вас. Например, нам надоело каждый раз переводить фотошоп тени в CSS в уме, и мы написали `ps-shadows`.
_скриншот_ + _код_

Ну и не забывайте про плагины. Если препроцессор имеет плагинную архитектуру, стоит, по крайней мере, изучить, какие плагины имеются, и как их писать. Понятно, что каждый, кто слышал про Stylus, знает и про Nib (точно так же как каждый, кто пользовался Sass, использовал Compass). Но это не единственный плагин. Например, можно не использовать стандартный минификатор Stylus, заменив его CSSO, а вместо стандартных префиксов из Nib использовать Autoprefixer. И конечно же, вы всегда можете написать свой.

В обшем, я призываю вас тщательнее изучать свой препроцессор: читать документацию и исходный код, пробовать его возможности на вкус, дописывать необходимые вам функции или плагины. Вот график моих личных ощущений «в попугаях»: разработка с использованием препроцессора ускоряется в два раза, а если вы используете препроцессор по максимуму — то ещё в два раза. При этом, правтически нахаляву.

Итак, с автоматизацией написания кода, мы закончили. Я передаю слово Артёму, он расскажет об [автоматизации поддержки кода](BOWER.md).
