Управление зависимостями
===


****
Цель: убедить аудиторию что управление зависимостями во front-end разработке можно автоматизировать
Идея1: осветить проблемы связанные с переиспользованием различных типов ресурсов внешних и внутренних
Идея2: показать как с этими проблемами справляется бовер
****

###### <заглавный слайд>
Управление зависимостями во front-end разработке также довольно времязатратная и не триваиальная процедура.

###### <подключание jquery>
Конечно если вы пишите простенькие сайты, то все управление зависимостями заканчивается скорее всего на подключении последней стабильной jQuery.

1. Заходим на сайт jQuery
2. Делаем волевой выбор между первой и второй версией jQuery
3. Качаем
4. Подключаем

Вроде никакой проблемы нет.

###### <подключение marionette>

Если вы хотите писать на чемнибудь более высокоуровневым то квест становится сложнее, напрмиер вы хотиет подключить Marionette

1. Заходим на сайт
2. Скачиваем
3. Подключаем
4. Ничего не работает
5. Идем докачиваем Backbone
6. Подключаем запускаем
7. Всеравно ничего не работает
8. Идем докачиваем underscore
....

И так далее пока у нас не появятся все зависимости marionette: backbone, несколько backbone плагинов, underscore, jquery.

###### <слайд с лого bower>
### Менеджеры пакетов
Так долго продолжаться не могло. И как только стало модно писать веб-приложения с толпой зависимостей, стали появляться различные менеджеры пакетов для веба. Которые брали на себя задачу разрешения зависимостей.

В этоже время появился и менеджер зависмостей bower. Который вобщемто единственный и выжил.
Он также как и все остальные пакетные менеджеры хорошо справлялся с задачами менеджера зависомостей:

###### <слайд добавление зависимостей>

Bower предоставляет удобное API для добовлеия зависимостей либо в концигурационный файл вашего проекта bower.json в секцию dependencies, либо по средствам CLI утилиты.


###### <слайд циклическое разрешение зависимостей>
Bower отлично справляется с задачей решения зависимостей даже для довльно запутанных случаев.

Например:

например вы подключили ряд зависимостей к своему проекту, эти зависимостив свою очередь могут иметь свои зависимости и так далее, скольугодно глубоко. Не редко возникает ситуация когда зависимости начинают пересекаться, требуя разне версии одного и тогоже пакета.

Bower скорее всего справится с решением такой задачки автоматически, ну или в крайнем случае спросит у пользователя какую версию той или иной библиотеки использовать. И сформирует на выходе плоское дерево зависмостей.

Но самая главное бовер почти ничего не просит в замен, не накладывает никаких ограничений, что открывает ряд дополнительныйх возможностей, на которых я хотелбы засотрить внимание

<слайд засимостью может быть что угодно>

Мы стараемся помаксимуму выделять часто повторяющии вещи в переиспользуемые сущности и поэтому для нас была критична возможность использовать в качестве зависмости не только JS но и куски верстки, различные миксины и прочие полустатические вещи.

#### Зависимостью может быть что угодно
Мы в разработке выделяем dev-зависимости и prod-зависимости.
dev-завимсимости это полустатические вещи.
prod-зависимости код который идет в продкшен, как правило это различный js код (внешний и внутренний)

В качестве dev-зависимостей мы переиспользуем:
* сторонние js-библиотеки
* внутриненние js-библиотеки
* параметризующиеся styl-файлы для контролов
* переиспользуемые кусочки верстки (partials)
* переиспользуемые хелперы для верстки

Мы также переиспользуем и данные для статических прототипов.

#### Зависимость можно вытащить, откуда угодно
`bower-registry` – огромный регистр, в котором есть все популярные библиотеки

также bower содержит ряд резолверов позволяющих вытаскивать завимисости хранящиеся вне регистра
* git репозиторий (таг/ветка) вплоть до коммита
* прямая ссылка на файл
* прямая ссылка на архив


Однако, сначала из коробки не было поддержки SVN-репозиториев. Это нас сперва сильно расстроило, но за один день удалось набросать свой простенький SVN-resolver, который поддерживал необходимый нам на тот момент функционал. А именно просто export нужного нам (жестко заданного) тага. Довести до полноценного резолвера (согласно `srmver`) руки, к сожалению, так и не дошли. Но все более-менее активные проекты отлично существовали на нашем форке месяца четыре, пока не зарилизили `bower` c поддержкой SVN.

<слайд с копипастой>

Вобщем старайтесь не заниматься копипастой между своими проектами, выделяйте все что можно в переиспользуемые модули и управляйте этим почти на холяву, ведь все инструменты для этого уже есть.

*******************
### Не все так гладко
Не смотря на то что бовер и без того снял много головной боли, осталось еще пара не решенных проблем:

1. подключение javascript на страницу согласно bower дереву зависимостей
2. подключение кастомизируемых js библиотек (таких как `modrnizr`, `jqery 2`)
