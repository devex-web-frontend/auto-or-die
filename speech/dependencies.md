Управление зависимостями
===


****
Цель: убедить аудиторию что управление зависимостями во front-end разработке можно автоматизировать
Идея1: осветить проблемы связанные с переиспользованием различных типов ресурсов внешних и внутренних
Идея2: показать как с этими проблемами справляется бовер
****

###### <заглавный слайд>
Управление зависимостями во front-end разработке также довольно времязатратная и не триваиальная процедура.




###### <слайд внешние зависмости>
### Внешние зависимости

В основном говря об управлении зависимостями имееют ввиду внешние зависимости (подключение различных сторонних js-библиотек/фреймворков/шимов).
Реже подключают сторонние css-фреймворки.

###### <слайд внутренние зависмости>
### Внутренние зависимости

Если компания довольно большая то появляются различные внутренние зависимости:

* Это конечно же внутрикорпаративные библиотечки/кконтролы/виджеты.
* Если проекты компании имеют часто переиспользуемые блоки то возникает желание переиспользовать верстку/стили/миксины чтобы не занмиаться веселой копипастой

<слайд засимостью может быть что угодно>
Чтобы не заниматься весело копипастой из проекта в проект мы стараемся переиспользовать все по максимум: полустатичные dev-ресурсы (styl-файлы, партиалы, данные). Prod-ресурсы различные вешние и внутренние js-библиотеки/фреймворки/шимы
Это приводит к первой проблеме управления зависимостями во front-end разработке – **зависимостью может быть что угодно**

Styl-файлы должны процессится стилусом
Данные/хелперы/партиалы должны быть достыпны для assemble

Весь внутрикорпаративный переиспользуемый код обычно легко достать через внутрикорпаративную VCS. 
С внешними зависмостми все на много сложнее, кто во что горазд:

* git репозиторий
* svn-репозиторий
* конечный файл
 
Это приводит ко второй проблеме переиспользования front-end ресурсов – **зависмость может находится где угодно**

Подключение высокоуровневых библиотек обычно сопряжено с танцами с бубном вокруг выкачивания определенных версий различных зависимосте и выисивании в документациях поддерживаемых версий.


 
### Bower

`Bower` - пакетный менеджер для web-ресурсов, написанный под node.js

### Три преимущества `bower`

#### Зависимостью может быть что угодно
Мы в разработке выделяем dev-зависимости и prod-зависимости.
dev-завимсимости это полустатические вещи.
prod-зависимости код который идет в продкшен, как правило это различный js код (внешний и внутренний)

В качестве dev-зависимостей мы переиспользуем:
* сторонние js-библиотеки
* внутриненние js-библиотеки
* параметризующиеся styl-файлы для контролов
* переиспользуемые кусочки верстки (partials)
* переиспользуемые хелперы для верстки

Мы также переиспользуем и данные для статических прототипов, а иногда и целые проекты.

#### Зависимость можно вытащить, откуда угодно
`bower-registry` – огромный регистр, в котором есть все популярные библиотеки

также bower содержит ряд резолверов позволяющих вытаскивать завимисости хранящиеся вне регистра
* git репозиторий (таг/ветка) вплоть до коммита
* прямая ссылка на файл
* прямая ссылка на архив


Однако, сначала из коробки не было поддержки SVN-репозиториев. Это нас сперва сильно расстроило, но за один день удалось набросать свой простенький SVN-resolver, который поддерживал необходимый нам на тот момент функционал. А именно просто export нужного нам (жестко заданного) тага. Довести до полноценного резолвера (согласно `srmver`) руки, к сожалению, так и не дошли. Но все более-менее активные проекты отлично существовали на нашем форке месяца четыре, пока не зарилизили `bower` c поддержкой SVN.

#### Разрешение зависимостей по `semver`

Указав, один раз, при разработке модуля все его зависимости вам не нужно каждый раз возвращаться и вспоминать "чтоже нужно для его работы". `Bower` сам рекурсивно выкачает все необходимые зависимости. Правильно указав зависимости можно даже долго не спотыкаться на проблемы со стабильностью, но лучше нанести упреждающий удар.


*******************
### Не все так гладко
Не смотря на то что бовер и без того снял много головной боли, осталось еще пара не решенных проблем:

1. подключение javascript на страницу согласно bower дереву зависимостей
2. подключение кастомизируемых js библиотек (таких как `modrnizr`, `jqery 2`)
