## ☠ HTML ☠

Думаю, каждому приходилось писать статический HTML. Причины могуть быть разные: у вас действительно статический контент, или вы используете HTML-странички как прототип

> < или? > 

И в общем-то всё хорошо, но с ростом размера файла или числа файлов всё сложнее и сложнее вносить изменения: либо надо разбираться в портянке из тысяч строк, либо копипастить в несколько файлов повторяющиеся участки.

Из покон веков для решения этой проблемы использовали серверную шаблонизацию. Это работает, но вам нужен сервер. Ставите Apache или Tomcat (или что вам больше нравится), прикручиваете свой любимый шаблонизатор, изучаете его синтаксис, каждый раз стартуете сервер — долго.

Клиентская шаблонизация? 

> < проблемы? >

Но можно использовать генератор статических сайтов. Сейчас я расскажу, как это работает на примере Assemble — остальные, по большому счёту отличаются только терминологией. И да, если у вас на примете есть какой-то другой генератор статических сайтов, с удовольствием обсужу его с вами после доклада.

Страницы могут генериться на основе одного лейаута — прощай копипаста! Страницы состоят из инклюдов или паршлов — легко разобраться! Данные можно подключать из файлов — не нужен сервер! Вы один раз генерите страницы, а потом их можно открыть на любой машине, на которой есть браузер.

---

В принципе, Assemble очень прост в освоении, и хотя, как и у многих опен-сорс проектов, документация у него страдает — разобраться несложно. Из важных моментов, которые стоит упомянуть:
* он поддерживает YFM: удобные формат задания переменных в YAML формате прямо в коде страницы
* у него есть встроенные переменные: `pagename`, `filename`, `ext` и т.д.
* он очень удобно конфигурируется, в частности есть настройка `postprocess`: можно, например, подправить пути к ресурсам

Уже несколько месяцев мы генерим статические прототипы с помощью Assemble и за это время столкнулись лишь с одной крупной сложностью: очень легко потерять ссылку на глобальный контекст — достаточно просто вызвать паршл в цикле. К счастью, у Handlebars есть хелперы — возможность писать вспомогательные директивы на JS — и мы создали воркэраунд:
`{{setGlobalScope}}` и `{{#withGlobalScope}}{{/withGlobalScope}}`: первый сохраняет ссылку на глобальный контекст, а второй — генерирует всё, что он оборачивает с учётом этого сохранённого глобального контекста.

Конечно же, это не единственные хелперы, которые мы написали. Найти `dx-assemble-helpers` можно на гитхабе.

Вот так, инструмент, который в общем-то придуман не совсем для этого, с помощью воркэраундов и небольшой библиотеки хелперов помогает нам писать код быстрее, делать его более поддерживаемым и, кроме того, оптимизировать связи с другими командами. Ну и чаще испытывать счастье.

Думаю, смерть под завалами HTML нам больше не грозит.

Так, с HTML мы, вроде, разобрались. Давайте обсудим [CSS](stylus.md).
