Тестирование
=============

Говоря о переиспользовании, нужно упоминуть и о тестировании.

###### <Слайд с переиспользованием/тестированием>

Все что вы переиспользуете нужно тестировать в обязательном порядке. Мы стараемся тестировать все. И различные полустатические dev-зависимости и конечный клиентский код который пойдет в production.

###### <Слайд с тестированием dev-зависимостей>


С тестированием простых полустатических front-end ресурсов (partials, helpers, stylus (функции, миксины)) все довльно просто. Запихиваем все файлики в перпроцессор (stylus, assemble или Handlebars.compile). И сравниваем получившийся результат с ожидаемым.

### Unit-тестирование

Тестировать клиентский код можно давно, есть огромное количество фреймворков для тестирования JS-кода. Однако, к стандартному оверходу `TDD` подхода добавляются все прелести клиентской разработки. Итак, если по шагам:

1. Нужно завести spec - файл (тупо HTML-документ)
2. Регистрировать в нем все файлы тестов
3. Открыть spec - файл во всех целевых браузерах
4. И на каждое изменение кода рефрешить все свои браузеры
 
### Такой TDD нам не нужен
В общем, неудивительно, что фронтенд разработчики очень нехотя тестируют свой код. За всеми этими танцами с бубнами вокруг тестов очень легко сбиться с мысли и забыть, что ты вообще хотел написать.
В общем, тестированию клиентских ресурсов нужен свой супергерой.

### Karma

Для нас таким супер героем стал test-runner `Karma`. 
### Быстрый фидбек
Самая главная идея, которую заложили в этот проект ребята из гугла, заключается в том, что тесты должны давать моментальный фидбек и не требовать постоянной пляски с подключением файлов и рефрешем браузеров.

### Важные моменты

`Karma` – это просто test-runner, который работает под `nodejs`. Он никак не ограничивает вас в выборе тестового фреймворка или используемых технологиях. Главное – ТЕСТИРУЙ и будь продуктивней.

###### <Слайд важные моменты Karma>
> мб стоит сделать более динамичный слайд под текст 

> 1. иконки браузеров
2. иконки фреймворков
3. Watcher
4. Reports

Достаточно выполнить простейшую настройку тестового окружения и `Karma` сама будет запускать все необходимые ВАМ браузеры. Подключать ВАШ любимый тестовый фреймворк. Следить за изменением в ВАШИХ файлах (исходниках и тестов). Перезапускать тесты во всех открытых браузерах. И сообщать ВАМ в удобной для ВАС форме результаты.

###### <Тестирование пользовательского взаимодействия>

Вроде весь головняк сняли кроме одного: тестирование пользовательского взаимодействия или end2end тесты.
Разработка кода который активно взаимодействет с пользователем превращается в ад. На каждое изменение приходится прокликивать контрольчик снова и снова, чтобу убедится что ничего не сломалось

###### <клик>

Пользовательские событя это такоеже API, просто его не уобно тестировать. Привлекать для этого селениум тоже было как-то стремновато. Но нам на помощь пришел NG-Scenario, насамом деле ng-scenario это модуль ангуляра который ребята разработали для тестирования приложений написаных на angularjs.

###### <слайд ngscenario>

Нам вполне хватает `ng-scenario`, который
* очень просто и легко позволяет писать простейшие сценарии пользовательского взаимодействия.
* Имеет строгий DSL, который не дает скатится в unit-тестирование e2e-инструментами
* Иммет довольно просто механизм расширения DSL (но нужно пользоваться с остарожностью)

###### <слайд тестируй>

Поначалу очень сложно отказаться от прокликивания своих контролов и довериться бездушной машине. Однако, спустя пару дней `TDD` разработки перестаешь скучать по всем раздражающим операциям, начинаешь более тестируемо писать код, грамотней разбивая его на функциональные составляющие.
Можно с уверенностью утверждать, что тестировать клиентский код сейчас можно с чистой совестью, не переживая за слишком большой оверхед, связанный с поддержанием тестового окружения.

